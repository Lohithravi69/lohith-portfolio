<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lohith R - Portfolio</title>
    <meta name="description" content="Lohith R — Computer Science student and Full-Stack Developer. Portfolio showcasing projects in AI, web development, and more. View live demos and GitHub repos.">
    <meta property="og:title" content="Lohith R — Portfolio">
    <meta property="og:description" content="Portfolio showcasing projects in AI, web development, and real-world apps. Contact: lohithravi69@gmail.com">
    <meta property="og:type" content="website">
    <meta name="theme-color" content="#667eea">
    <link rel="canonical" href="https://lohith-portfolio-ashy.vercel.app/">
    <!-- Only preconnect to origins we actually use during initial load -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Lohith R — Portfolio">
    <meta name="twitter:description" content="Portfolio showcasing projects in AI, web development, and real-world apps.">
    <meta name="twitter:image" content="https://images.unsplash.com/photo-1517077304055-6e89abbf09b0?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" onload="this.rel='stylesheet'">
    <link rel="preload" as="image" href="/public/assets/lumoro.webp">
    <noscript><link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet"></noscript>
    <!-- Font Awesome removed: replaced with inline SVG sprite for only used icons -->
    <!-- lottie-player will be lazy-loaded when hero enters viewport to improve initial load performance -->
    <!-- JSON-LD structured data for Person / Portfolio -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Person",
      "name": "Lohith R",
      "url": "https://lohith-portfolio-ashy.vercel.app/",
      "email": "lohithravi69@gmail.com",
      "jobTitle": "Computer Science Student",
      "sameAs": [
        "https://github.com/Lohithravi69",
        "https://linkedin.com/in/lohith-ravi-22b9a32a0"
      ]
    }
    </script>

nav{position:fixed;top:0;left:0;right:0;background:rgba(255,255,255,0.9);backdrop-filter:blur(6px);z-index:1000}nav .container{display:flex;align-items:center;justify-content:space-between;padding:.75rem 20px}nav ul{display:flex;list-style:none;margin:0;padding:0;gap:1rem}nav ul li a{color:var(--text);text-decoration:none;font-weight:500;padding:.5rem 1rem;border-radius:6px;transition:background .3s ease}nav ul li a:hover{background:var(--accent);color:#fff}@media (max-width:768px){nav ul{position:fixed;top:100%;left:0;right:0;background:#fff;padding:1rem;display:flex;flex-direction:column;gap:0.5rem;transform:translateY(-100%);transition:transform .3s ease}nav ul.open{transform:translateY(0)}}.nav-toggle{display:none}@media (max-width:768px){.nav-toggle{display:block}}.section-title h2{font-size:1.4rem;margin-bottom:.5rem}h1{font-size:2.2rem;line-height:1.05}.theme-toggle{display:inline-flex;align-items:center;gap:.5rem;background:transparent;border:none;cursor:pointer;color:var(--text);font-size:1rem}
    <!-- Moved system-first font stack into main body rule and removed duplicate style block to reduce inline CSS. Skip-link and focus styles remain in the main stylesheet. -->
</head>
<body>
    <a class="skip-link" href="#main-content">Skip to main content</a>
    <nav>
        <div class="container">
            <a href="#hero" aria-label="Lohith R homepage" style="color: var(--accent); text-decoration: none; font-weight: 700;">Lohith R</a>
            <div style="display:flex; gap:0.5rem; align-items:center;">
                <button class="theme-toggle" id="theme-toggle" aria-label="Toggle theme">🌙</button>
                <button class="nav-toggle" aria-controls="primary-nav" aria-expanded="false" aria-label="Toggle navigation">☰</button>
            </div>
            <ul id="primary-nav">
                <li><a href="#hero">Home</a></li>
                <li><a href="#about">About</a></li>
                <li><a href="#skills">Skills</a></li>
                <li><a href="#projects">Projects</a></li>
                <li><a href="#education">Education</a></li>
                <li><a href="#contact">Contact</a></li>
            </ul>
        </div>
    </nav>

        <main id="main-content">

        <!-- Inline SVG sprite: only icons used on the page. Improves performance vs loading full Font Awesome font files -->
        <svg aria-hidden="true" style="position:absolute;width:0;height:0;overflow:hidden;" focusable="false">
            <defs>
                <symbol id="icon-java" viewBox="0 0 32 32"><path d="M16 2c-1 0-3 1-3 1s0 1 1 1c2 0 4 1 4 1s-1-3-2-3zM8 12c0 0 2-2 8-2s8 2 8 2-3-1-8-1-8 1-8 1z"/></symbol>
                <symbol id="icon-html5" viewBox="0 0 32 32"><path d="M4 2l2 24 10 4 10-4 2-24zM23 9h-8l1 3h6l-1 4-4 2-4-2-1-3h3l.5 2 2 1 2-1 1.5-6z"/></symbol>
                <symbol id="icon-database" viewBox="0 0 32 32"><path d="M16 4c-7 0-12 2-12 4v16c0 2 5 4 12 4s12-2 12-4v-16c0-2-5-4-12-4zm0 2c6 0 10 1.7 10 2s-4 2-10 2-10-1.7-10-2 4-2 10-2z"/></symbol>
                <symbol id="icon-brain" viewBox="0 0 32 32"><path d="M16 4c-6 0-10 4-10 8 0 2 1 4 2 5v6h16v-6c1-1 2-3 2-5 0-4-4-8-10-8z"/></symbol>
                <symbol id="icon-github" viewBox="0 0 24 24"><path d="M12 .5a12 12 0 00-3.8 23.4c.6.1.8-.3.8-.6v-2.2c-3.3.7-4-1.6-4-1.6-.5-1.2-1.2-1.5-1.2-1.5-1-.7.1-.7.1-.7 1.1.1 1.7 1.1 1.7 1.1 1 .1 1.5-.8 1.8-1.2-2.7-.3-5.6-1.4-5.6-6.2 0-1.4.5-2.5 1.2-3.4-.1-.3-.5-1.6.1-3.3 0 0 1-.3 3.3 1.2a11.3 11.3 0 016 0C17 6 18 6.3 18 6.3c.6 1.7.2 3 .1 3.3.8.9 1.2 2 1.2 3.4 0 4.9-2.9 5.9-5.6 6.2.4.4.8 1.1.8 2.2v3.2c0 .3.2.7.8.6A12 12 0 0012 .5z"/></symbol>
                <symbol id="icon-users" viewBox="0 0 32 32"><path d="M16 16c-4 0-7 3-7 6v4h14v-4c0-3-3-6-7-6zM16 10a4 4 0 100-8 4 4 0 000 8z"/></symbol>
                <symbol id="icon-envelope" viewBox="0 0 32 32"><path d="M4 8v16h24V8l-12 8L4 8z"/></symbol>
                <symbol id="icon-phone" viewBox="0 0 32 32"><path d="M6 4l6 4c1 1 3 3 4 4s3 3 4 4l4 6v4l-6-2c-5-2-10-7-12-12L6 4z"/></symbol>
                <symbol id="icon-map-marker-alt" viewBox="0 0 24 24"><path d="M12 2C8 2 5 5 5 9c0 5 7 13 7 13s7-8 7-13c0-4-3-7-7-7zm0 9.5A2.5 2.5 0 1112 6.5 2.5 2.5 0 0112 11.5z"/></symbol>
                <symbol id="icon-linkedin" viewBox="0 0 24 24"><path d="M4.98 3.5C4.98 4.88 3.88 6 2.5 6S0 4.88 0 3.5 1.12 1 2.5 1 4.98 2.12 4.98 3.5zM.5 8h4V24h-4zM8.5 8h3.7v2.2h.1c.5-1 1.9-2.2 4-2.2 4.3 0 5.1 2.8 5.1 6.5V24h-4V15.6c0-2.0 0-4.6-2.8-4.6-2.8 0-3.2 2.2-3.2 4.4V24h-4z"/></symbol>
            </defs>
        </svg>

    <section id="hero">
        <div class="container">
            <div class="hero-content">
                <div class="hero-left">
                    <h1>Lohith R</h1>
                    <p>Computer Science and Engineering Student | Full-Stack Developer | AI Enthusiast</p>
                    <p>Methodical and driven Computer Science and Engineering student with a strong foundation in full-stack web development and real-world application design. Experienced in building scalable, user-friendly systems using HTML, CSS, JavaScript, Flask, and MySQL. Passionate about solving practical problems through innovative tech solutions.</p>
                    <a href="#projects" class="btn">View My Work</a>
                    <a href="#contact" class="btn">Get In Touch</a>
                </div>
                <div class="hero-right">
                    <lottie-player src="https://assets7.lottiefiles.com/packages/lf20_2zv6fglg.json"  background="transparent"  speed="1"  loop  autoplay></lottie-player>
                </div>
            </div>
        </div>
    </section>

    <section id="about">
        <div class="container">
            <div class="section-title">
                <h2>About Me</h2>
            </div>
            <p style="text-align: center; max-width: 800px; margin: 0 auto; font-size: 1.1rem;">
                I'm deeply interested in cybersecurity, artificial intelligence, and solving real-world problems using technology. 
                I've worked on several innovative projects in AI, NLP, and e-commerce platforms. Adept at troubleshooting deployment issues on Vercel and Render. 
                Active participant in Smart India Hackathon and Naan Mudhalvan program, with a commitment to continuous learning and professional growth.
            </p>
        </div>
    </section>

    <section id="skills">
        <div class="container">
            <div class="section-title">
                <h2>Technical Skills</h2>
            </div>
            <div class="skills-grid">
                <div class="skill-card">
                    <svg class="icon icon-java" aria-hidden="true"><use href="#icon-java"></use></svg>
                    <h3>Java</h3>
                    <p>Object-oriented programming and application development</p>
                </div>
                <div class="skill-card">
                    <svg class="icon icon-html5" aria-hidden="true"><use href="#icon-html5"></use></svg>
                    <h3>Web Development</h3>
                    <p>HTML, CSS, JavaScript, Flask</p>
                </div>
                <div class="skill-card">
                    <svg class="icon icon-database" aria-hidden="true"><use href="#icon-database"></use></svg>
                    <h3>Database</h3>
                    <p>MySQL for data management</p>
                </div>
                <div class="skill-card">
                    <svg class="icon icon-brain" aria-hidden="true"><use href="#icon-brain"></use></svg>
                    <h3>AI & ML</h3>
                    <p>Full Stack Web Apps, AI-based Systems, NLP Classifiers</p>
                </div>
                <div class="skill-card">
                    <svg class="icon icon-github" aria-hidden="true"><use href="#icon-github"></use></svg>
                    <h3>Tools & Platforms</h3>
                    <p>Vercel, Render, GitHub</p>
                </div>
                <div class="skill-card">
                    <svg class="icon icon-users" aria-hidden="true"><use href="#icon-users"></use></svg>
                    <h3>Soft Skills</h3>
                    <p>Problem Solving, Teamwork, Adaptability, Communication</p>
                </div>
            </div>
        </div>
    </section>

    <section id="projects">
        <div class="container">
            <div class="section-title">
                <h2>Projects</h2>
            </div>
            <div class="projects-grid">
                <div class="project-card" data-id="lumoro" data-title="Lumoro E-Commerce Scent Website" data-desc="Developed a perfume-based e-commerce website using HTML, CSS and MySQL, featuring product catalog, cart, and secure checkout." data-image="/public/assets/lumoro.webp" data-github="https://github.com/Lohithravi69/perfume" data-tech="HTML,CSS,MySQL,JavaScript">
                    <picture>
                        <source type="image/webp" srcset="/public/assets/lumoro.webp 400w, /public/assets/lumoro.webp 800w" sizes="(max-width:600px) 100vw, 400px">
                        <img fetchpriority="high" decoding="async" src="/public/assets/lumoro.webp" srcset="/public/assets/lumoro.webp 400w, /public/assets/lumoro.webp 800w" sizes="(max-width:600px) 100vw, 400px" alt="E-Commerce" loading="lazy" width="400" height="200">
                    </picture>
                    <div class="content">
                        <h3>Lumoro E-Commerce Scent Website</h3>
                        <p>Developed a perfume-based e-commerce website using HTML, CSS, and MySQL, featuring product catalog, cart, and secure checkout.</p>
                        <a href="https://github.com/Lohithravi69/perfume" target="_blank" rel="noopener noreferrer" class="btn">View on GitHub</a>
                    </div>
                </div>
                <div class="project-card" data-id="safenet" data-title="Emergency SOS App for Flood Management" data-desc="AI-integrated emergency response app built for Smart India Hackathon 2025 to provide real-time flood alerts, SOS messaging, and rescue coordination." data-image="/public/assets/safenet.webp" data-live="https://safenetsos-app.vercel.app" data-tech="React,Node.js,TensorFlow,Maps API">
                    <picture>
                        <source type="image/webp" srcset="/public/assets/safenet.webp 400w, /public/assets/safenet.webp 800w" sizes="(max-width:600px) 100vw, 400px">
                        <img decoding="async" src="/public/assets/safenet.webp" srcset="/public/assets/safenet.webp 400w, /public/assets/safenet.webp 800w" sizes="(max-width:600px) 100vw, 400px" alt="Emergency App" loading="lazy" width="400" height="200">
                    </picture>
                    <div class="content">
                        <h3>Emergency SOS App for Flood Management</h3>
                        <p>AI-integrated emergency response app built for Smart India Hackathon 2025 to provide real-time flood alerts, SOS messaging, and rescue coordination.</p>
                        <a href="https://safenetsos-app.vercel.app" target="_blank" rel="noopener noreferrer" class="btn">View Live Demo</a>
                    </div>
                </div>
                <div class="project-card" data-id="fraud-detect" data-title="Credit Card Fraud Detection using AI" data-desc="Machine learning-based fraud detection system developed in Python to identify suspicious transactions and alert in real-time." data-image="/public/assets/fraud.webp" data-github="https://github.com/Lohithravi69/FraudDetection" data-tech="Python,scikit-learn,Pandas,Flask">
                    <picture>
                        <source type="image/webp" srcset="/public/assets/fraud.webp 400w, /public/assets/fraud.webp 800w" sizes="(max-width:600px) 100vw, 400px">
                        <img decoding="async" src="/public/assets/fraud.webp" srcset="/public/assets/fraud.webp 400w, /public/assets/fraud.webp 800w" sizes="(max-width:600px) 100vw, 400px" alt="Fraud Detection" loading="lazy" width="400" height="200">
                    </picture>
                    <div class="content">
                        <h3>Credit Card Fraud Detection using AI</h3>
                        <p>Machine learning-based fraud detection system developed in Python to identify suspicious transactions and alert in real-time.</p>
                        <a href="https://github.com/Lohithravi69/FraudDetection" target="_blank" rel="noopener noreferrer" class="btn">View on GitHub</a>
                    </div>
                </div>
                <div class="project-card" data-id="fake-news" data-title="Fake News Detection using NLP and Flask" data-desc="AI-powered Flask web app that detects misleading or fake news using Natural Language Processing." data-image="/public/assets/fakenews.webp" data-live="https://fake-news-detection-tau.vercel.app" data-tech="Python,NLTK,Flask,Heroku">
                    <picture>
                        <source type="image/webp" srcset="/public/assets/fakenews.webp 400w, /public/assets/fakenews.webp 800w" sizes="(max-width:600px) 100vw, 400px">
                        <img decoding="async" src="/public/assets/fakenews.webp" srcset="/public/assets/fakenews.webp 400w, /public/assets/fakenews.webp 800w" sizes="(max-width:600px) 100vw, 400px" alt="Fake News" loading="lazy" width="400" height="200">
                    </picture>
                    <div class="content">
                        <h3>Fake News Detection using NLP and Flask</h3>
                        <p>AI-powered Flask web app that detects misleading or fake news using Natural Language Processing.</p>
                        <a href="https://fake-news-detection-tau.vercel.app" target="_blank" rel="noopener noreferrer" class="btn">View Live Demo</a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="education">
        <div class="container">
            <div class="section-title">
                <h2>Education & Achievements</h2>
            </div>
            <div class="timeline">
                <div class="timeline-item">
                    <h3>Bachelor of Engineering (B.E.) in Computer Science and Engineering</h3>
                    <p>PPG Institute of Technology, Coimbatore | Affiliated to Anna University</p>
                    <p>2022 – 2027 | CGPA: 7.83 / 10 (as of 4th semester)</p>
                </div>
                <div class="timeline-item">
                    <h3>NPTEL Course – Introduction to Internet of Things</h3>
                    <p>Score: 63%</p>
                </div>
                <div class="timeline-item">
                    <h3>Active Participant – Smart India Hackathon 2025</h3>
                    <p>Emergency SOS App for Flood Management</p>
                </div>
                <div class="timeline-item">
                    <h3>Completed Naan Mudhalvan AI & Full Stack Development Program</h3>
                    <p>Credit Card Fraud Detection and other projects</p>
                </div>
            </div>
        </div>
    </section>

    <section id="contact">
        <div class="container">
            <div class="section-title">
                <h2>Contact Me</h2>
            </div>
            <div class="contact-grid">
                <div class="contact-item">
                    <svg class="icon icon-envelope" aria-hidden="true"><use href="#icon-envelope"></use></svg>
                    <h3>Email</h3>
                    <p><a href="mailto:lohithravi69@gmail.com">lohithravi69@gmail.com</a></p>
                </div>
                <div class="contact-item">
                    <svg class="icon icon-phone" aria-hidden="true"><use href="#icon-phone"></use></svg>
                    <h3>Phone</h3>
                    <p><a href="tel:+917010102623">+91 70101 02623</a></p>
                </div>
                <div class="contact-item">
                    <svg class="icon icon-map-marker-alt" aria-hidden="true"><use href="#icon-map-marker-alt"></use></svg>
                    <h3>Location</h3>
                    <p>Coimbatore, Tamil Nadu, India</p>
                </div>
                <div class="contact-item">
                    <svg class="icon icon-github" aria-hidden="true"><use href="#icon-github"></use></svg>
                    <h3>GitHub</h3>
                    <p><a href="https://github.com/Lohithravi69" target="_blank" rel="noopener noreferrer">github.com/Lohithravi69</a></p>
                </div>
                <div class="contact-item">
                    <svg class="icon icon-linkedin" aria-hidden="true"><use href="#icon-linkedin"></use></svg>
                    <h3>LinkedIn</h3>
                    <p><a href="https://linkedin.com/in/lohith-ravi-22b9a32a0" target="_blank" rel="noopener noreferrer">linkedin.com/in/lohith-ravi-22b9a32a0</a></p>
                </div>
                <div class="contact-item" style="grid-column: 1 / -1; text-align: left;">
                    <h3>Send a message</h3>
                    <form id="contact-form" aria-label="Contact form">
                        <div style="display:flex; gap:0.5rem; flex-wrap:wrap;">
                            <input type="text" id="cf-name" name="name" placeholder="Your name" required style="flex:1;padding:0.5rem;border-radius:6px;border:1px solid #ddd;">
                            <input type="email" id="cf-email" name="email" placeholder="Your email" required style="flex:1;padding:0.5rem;border-radius:6px;border:1px solid #ddd;">
                        </div>
                        <div style="margin-top:0.5rem;">
                            <textarea id="cf-message" name="message" rows="5" placeholder="How can I help?" required style="width:100%;padding:0.5rem;border-radius:6px;border:1px solid #ddd;"></textarea>
                        </div>
                        <div style="margin-top:0.5rem; display:flex; gap:0.5rem; align-items:center;">
                            <button type="submit" class="btn">Send Message</button>
                            <span id="cf-status" aria-live="polite" style="color:#333"></span>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </section>

    </main>

    <footer>
        <div class="container">
            <p>&copy; 2024 Lohith R. All rights reserved.</p>
        </div>
    </footer>

    <!-- Project detail modal (accessible) -->
    <div id="project-modal" class="modal" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="modal-title">
        <div class="modal-backdrop" data-dismiss="modal"></div>
        <div class="modal-panel" role="document">
            <button class="modal-close" aria-label="Close project details">×</button>
                <div class="modal-body">
                <div id="modal-carousel" style="width:40%; position:relative;">
                    <button id="carousel-prev" class="btn" aria-label="Previous image" style="position:absolute;left:6px;top:6px;z-index:3;">◀</button>
                    <button id="carousel-next" class="btn" aria-label="Next image" style="position:absolute;right:6px;top:6px;z-index:3;">▶</button>
                    <div id="carousel-indicators" aria-hidden="true" style="position:absolute;left:50%;bottom:8px;transform:translateX(-50%);display:flex;gap:6px;z-index:4;"></div>
                </div>
                <img id="modal-image" alt="Project screenshot" loading="lazy" style="display:none;">
                <div class="modal-content">
                    <h2 id="modal-title"></h2>
                    <p id="modal-desc"></p>
                    <div id="modal-tech" style="margin-top:0.5rem;" aria-hidden="false"></div>
                    <div id="modal-embed" style="margin-top:0.75rem;"></div>
                    <div class="modal-actions">
                        <a id="modal-live" class="btn" target="_blank" rel="noopener noreferrer">View Live</a>
                        <a id="modal-github" class="btn" target="_blank" rel="noopener noreferrer">View on GitHub</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Analytics consent banner -->
    <div id="consent-banner" class="consent-banner" aria-hidden="true">
        <div class="consent-inner">
            <p>We use optional analytics to improve this site. Do you allow anonymous usage tracking?</p>
            <div class="consent-actions">
                <button id="consent-accept" class="btn">Yes, allow analytics</button>
                <button id="consent-decline" class="btn ghost">No, thanks</button>
            </div>
        </div>
    </div>

    <script defer>
    // Placeholder for lightweight analytics (Plausible/umami). Replace with real snippet in production.
    /*
     (Optional) Example Plausible script:
     <script async defer data-domain="yourdomain.com" src="https://plausible.io/js/plausible.js"></script>
    */

    // Project modal logic (delegated)
    (() => {
        const modal = document.getElementById('project-modal');
        const modalTitle = document.getElementById('modal-title');
        const modalDesc = document.getElementById('modal-desc');
        const modalImage = document.getElementById('modal-image');
        const modalLive = document.getElementById('modal-live');
        const modalGithub = document.getElementById('modal-github');
        const closeButtons = modal.querySelectorAll('[data-dismiss], .modal-close');

        let caseStudies = null;

        async function loadCaseStudies() {
            if (caseStudies) return caseStudies;
            try {
                const r = await fetch('/data/case-studies.json', { cache: 'no-cache' });
                caseStudies = await r.json();
            } catch (err) {
                console.error('Failed to load case studies', err);
                caseStudies = [];
            }
            return caseStudies;
        }

        function renderCarousel(images) {
            if (!images || !images.length) return '';
            return images.map((src, idx) => `<img class="carousel-image" src="${src}" alt="Screenshot ${idx+1}" loading="lazy">`).join('');
        }

        async function openModal(data) {
            modalTitle.textContent = data.title || '';
            modalDesc.textContent = data.desc || '';
            // if data.id is present, try to load richer case study
            if (data.id) {
                const list = await loadCaseStudies();
                const found = list.find(cs => cs.id === data.id);
                if (found) {
                    // render images carousel
                    const carouselHtml = renderCarousel(found.images || [data.image].filter(Boolean));
                    const modalBodyImage = document.getElementById('modal-image');
                    if (carouselHtml) {
                        modalBodyImage.style.display = 'none';
                        const holder = document.getElementById('modal-carousel');
                        if (holder) holder.innerHTML = carouselHtml;
                    }
                    // show embed if available
                    const embedContainer = document.getElementById('modal-embed');
                    if (found.embed && embedContainer) {
                        embedContainer.innerHTML = `<iframe src="${found.embed}" title="Interactive demo" style="width:100%;height:300px;border:0;border-radius:8px;" loading="lazy"></iframe>`;
                    } else if (embedContainer) {
                        embedContainer.innerHTML = '';
                    }
                }
            } else {
                // fallback single image
                if (data.image) {
                    modalImage.src = data.image;
                    modalImage.alt = data.title || 'Project screenshot';
                    modalImage.style.display = '';
                } else {
                    modalImage.style.display = 'none';
                }
            }
            // populate tech list
            const techListContainer = document.getElementById('modal-tech');
            if (techListContainer) {
                techListContainer.innerHTML = '';
                const techCsv = data.tech || '';
                const techs = techCsv.split(',').map(t => t.trim()).filter(Boolean);
                techs.forEach(t => {
                    const el = document.createElement('span');
                    el.className = 'tech-pill';
                    el.textContent = t;
                    techListContainer.appendChild(el);
                });
            }
            if (data.live) {
                modalLive.href = data.live;
                modalLive.style.display = '';
            } else {
                modalLive.style.display = 'none';
            }
            if (data.github) {
                modalGithub.href = data.github;
                modalGithub.style.display = '';
            } else {
                modalGithub.style.display = 'none';
            }
            modal.setAttribute('aria-hidden', 'false');
            modal.classList.add('open');
            // trap focus
            modal.focus();
            document.body.style.overflow = 'hidden';

            // initialize carousel controls
            const prev = document.getElementById('carousel-prev');
            const next = document.getElementById('carousel-next');
            const holder = document.getElementById('modal-carousel');
            let currentIndex = 0;
            function showIndex(i) {
                const imgs = holder.querySelectorAll('.carousel-image');
                const dots = document.querySelectorAll('#carousel-indicators .dot');
                if (!imgs.length) return;
                imgs.forEach((img, idx) => img.style.display = idx === i ? '' : 'none');
                dots.forEach((d, idx) => d.classList.toggle('active', idx === i));
                currentIndex = i;
            }
            prev && prev.addEventListener('click', () => {
                const imgs = holder.querySelectorAll('.carousel-image');
                if (!imgs.length) return;
                showIndex((currentIndex - 1 + imgs.length) % imgs.length);
            });
            next && next.addEventListener('click', () => {
                const imgs = holder.querySelectorAll('.carousel-image');
                if (!imgs.length) return;
                showIndex((currentIndex + 1) % imgs.length);
            });
            // indicators
            const indicators = document.getElementById('carousel-indicators');
            indicators.innerHTML = '';
            const imgs = holder.querySelectorAll('.carousel-image');
            imgs.forEach((_, idx) => {
                const dot = document.createElement('button');
                dot.className = 'dot';
                dot.setAttribute('aria-label', `Show image ${idx+1}`);
                dot.addEventListener('click', () => showIndex(idx));
                indicators.appendChild(dot);
            });

            // autoplay
            let autoplayTimer = null;
            function startAutoplay() {
                if (autoplayTimer) clearInterval(autoplayTimer);
                autoplayTimer = setInterval(() => {
                    const imgs = holder.querySelectorAll('.carousel-image');
                    if (!imgs.length) return;
                    showIndex((currentIndex + 1) % imgs.length);
                }, 4000);
            }
            startAutoplay();

            // touch swipe support
            let touchStartX = 0;
            holder.addEventListener('touchstart', (e) => { touchStartX = e.touches[0].clientX; if (autoplayTimer) clearInterval(autoplayTimer); });
            holder.addEventListener('touchend', (e) => {
                const dx = e.changedTouches[0].clientX - touchStartX;
                if (Math.abs(dx) > 40) {
                    if (dx > 0) prev && prev.click(); else next && next.click();
                }
                startAutoplay();
            });
            // keyboard left/right for carousel
            function carouselKey(e) {
                if (e.key === 'ArrowLeft') prev && prev.click();
                if (e.key === 'ArrowRight') next && next.click();
            }
            window.addEventListener('keydown', carouselKey);
            // show first image
            showIndex(0);
            // cleanup when modal closes
            modal.addEventListener('transitionend', () => {
                if (!modal.classList.contains('open')) {
                    window.removeEventListener('keydown', carouselKey);
                }
            }, { once: true });
        }

        function closeModal() {
            modal.setAttribute('aria-hidden', 'true');
            modal.classList.remove('open');
            document.body.style.overflow = '';
        }

        // Open when clicking a project-card
        document.addEventListener('click', (e) => {
            const card = e.target.closest('.project-card');
            if (!card) return;
            // ignore clicks on explicit links inside card
            if (e.target.tagName === 'A') return;
            const data = {
                title: card.dataset.title,
                desc: card.dataset.desc,
                image: card.dataset.image,
                github: card.dataset.github,
                live: card.dataset.live
            };
            openModal(data);
        });

        // Close when clicking backdrop or close button
        modal.addEventListener('click', (e) => {
            if (e.target.classList.contains('modal-backdrop') || e.target.classList.contains('modal-close')) {
                closeModal();
            }
        });

        // Close on Escape
        window.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && modal.classList.contains('open')) closeModal();
        });

        // Analytics consent
        (function analyticsConsent() {
            const banner = document.getElementById('consent-banner');
            const accept = document.getElementById('consent-accept');
            const decline = document.getElementById('consent-decline');
            const key = 'analytics-consent';

            function showBanner() {
                if (!localStorage.getItem(key)) {
                    banner.setAttribute('aria-hidden', 'false');
                    banner.classList.add('visible');
                }
            }

            function setConsent(value) {
                localStorage.setItem(key, value ? 'granted' : 'denied');
                banner.setAttribute('aria-hidden', 'true');
                banner.classList.remove('visible');
                if (value) loadAnalytics();
            }

            accept.addEventListener('click', () => setConsent(true));
            decline.addEventListener('click', () => setConsent(false));

            // If previously granted, load analytics immediately
            if (localStorage.getItem(key) === 'granted') loadAnalytics();
            else showBanner();

            function loadAnalytics() {
                // Insert your analytics script here (Plausible/umami/GA)
                // Example (Plausible):
                // const s = document.createElement('script');
                // s.src = 'https://plausible.io/js/plausible.js';
                // s.defer = true; s.async = true; s.setAttribute('data-domain', location.hostname);
                // document.head.appendChild(s);
                console.info('Analytics would be loaded now (consent granted)');
            }
        })();

    })();

    // Lazy-load Lottie player when hero is visible
    (function lazyLottie() {
        const hero = document.getElementById('hero');
        if (!hero) return;
        const io = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const s = document.createElement('script');
                    s.src = 'https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js';
                    s.defer = true; s.async = true;
                    document.head.appendChild(s);
                    io.disconnect();
                }
            });
        }, { rootMargin: '200px' });
        io.observe(hero);
    })();
    // Smooth scrolling for navigation
        document.querySelectorAll('nav a').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                target.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            });
        });

        // Scroll animations
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('animate');
                }
            });
        }, observerOptions);

        // Observe sections, titles, cards, items
        document.querySelectorAll('section').forEach(section => observer.observe(section));
        document.querySelectorAll('.section-title').forEach(title => observer.observe(title));
        document.querySelectorAll('.skill-card').forEach(card => observer.observe(card));
        document.querySelectorAll('.project-card').forEach(card => observer.observe(card));
        document.querySelectorAll('.timeline-item').forEach(item => observer.observe(item));
        document.querySelectorAll('.contact-item').forEach(item => observer.observe(item));

        // Mobile nav toggle behavior
        const navToggle = document.querySelector('.nav-toggle');
        const primaryNav = document.getElementById('primary-nav');
        if (navToggle && primaryNav) {
            navToggle.addEventListener('click', () => {
                const expanded = navToggle.getAttribute('aria-expanded') === 'true';
                navToggle.setAttribute('aria-expanded', String(!expanded));
                primaryNav.classList.toggle('open');
            });
        }

        // Contact form submission (client-side)
        const contactForm = document.getElementById('contact-form');
        if (contactForm) {
            const statusEl = document.getElementById('cf-status');
            contactForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                const btn = contactForm.querySelector('button[type="submit"]');
                const name = document.getElementById('cf-name').value.trim();
                const email = document.getElementById('cf-email').value.trim();
                const message = document.getElementById('cf-message').value.trim();
                if (!name || !email || !message) {
                    statusEl.textContent = 'Please fill all fields.';
                    return;
                }
                try {
                    btn.disabled = true;
                    statusEl.textContent = 'Sending...';
                    const res = await fetch('/api/contact', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ name, email, message })
                    });
                    const data = await res.json();
                    if (res.ok) {
                        statusEl.textContent = 'Message sent — thank you!';
                        contactForm.reset();
                    } else {
                        statusEl.textContent = data?.error || 'Failed to send message.';
                    }
                } catch (err) {
                    console.error(err);
                    statusEl.textContent = 'Network error — please try again later.';
                } finally {
                    btn.disabled = false;
                }
            });
        }
    </script>
    <!-- Theme toggle: persist in localStorage and reflect system preference -->
    <script>
        (function () {
            const themeToggle = document.getElementById('theme-toggle');
            const root = document.documentElement;
            const stored = localStorage.getItem('theme');
            const systemPrefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
            const initial = stored || (systemPrefersDark ? 'dark' : 'light');
            if (initial === 'dark') root.setAttribute('data-theme', 'dark');
            if (themeToggle) {
                const updateIcon = () => { themeToggle.textContent = root.getAttribute('data-theme') === 'dark' ? '☀️' : '🌙'; };
                updateIcon();
                themeToggle.addEventListener('click', () => {
                    const now = root.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
                    if (now === 'dark') root.setAttribute('data-theme', 'dark'); else root.removeAttribute('data-theme');
                    localStorage.setItem('theme', now === 'dark' ? 'dark' : 'light');
                    updateIcon();
                });
            }
        })();

    </script>

    <!-- Defer loading of external heavy vendor CSS/JS where possible -->
    <script>
    // Add defer to fontawesome stylesheet load to avoid render-blocking (non-critical icons)
    (function deferFontAwesome(){
        try {
            const fa = document.querySelector('link[href*="font-awesome"]');
            if (!fa) return;
            // convert to preload and then swap
            const href = fa.href;
            const pre = document.createElement('link');
            pre.rel = 'preload'; pre.as = 'style'; pre.href = href;
            document.head.appendChild(pre);
            // load stylesheet asynchronously
            const s = document.createElement('link');
            s.rel = 'stylesheet'; s.href = href; s.media = 'print';
            s.onload = function(){ this.media = 'all'; };
            document.head.appendChild(s);
            // remove original
            fa.remove();
        } catch (e) {
            // swallow errors silently — non-critical
            console.warn('deferFontAwesome failed', e);
        }
    })();
    </script>

</body>
</html>