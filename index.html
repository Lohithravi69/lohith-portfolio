<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lohith R - Portfolio</title>
    <meta name="description" content="Lohith R — Computer Science student and Full-Stack Developer. Portfolio showcasing projects in AI, web development, and more. View live demos and GitHub repos.">
    <meta property="og:title" content="Lohith R — Portfolio">
    <meta property="og:description" content="Portfolio showcasing projects in AI, web development, and real-world apps. Contact: lohithravi69@gmail.com">
    <meta property="og:type" content="website">
    <meta name="theme-color" content="#667eea">
    <link rel="canonical" href="https://lohith-portfolio-crhmbj34k-lohithravi69s-projects.vercel.app/">
    <!-- No external webfonts: prefer system font stack for fastest load -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Lohith R — Portfolio">
    <meta name="twitter:description" content="Portfolio showcasing projects in AI, web development, and real-world apps.">
    <meta name="twitter:image" content="https://images.unsplash.com/photo-1517077304055-6e89abbf09b0?ixlib=rb-4.0.3&auto=format&fit=crop&w=1350&q=80">
        <!-- No external fonts requested. Using a system font stack. -->
    <link rel="preload" as="image" type="image/webp" href="/assets/lumoro.webp">
    <!-- Font Awesome removed: replaced with inline SVG sprite for only used icons -->
    <!-- lottie-player will be lazy-loaded when hero enters viewport to improve initial load performance -->
    <!-- JSON-LD structured data for Person / Portfolio -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Person",
      "name": "Lohith R",
      "url": "https://lohith-portfolio-crhmbj34k-lohithravi69s-projects.vercel.app/",
      "email": "lohithravi69@gmail.com",
      "jobTitle": "Computer Science Student",
      "sameAs": [
        "https://github.com/Lohithravi69",
        "https://linkedin.com/in/lohith-ravi-22b9a32a0"
      ]
    }
    </script>

    <style>
:root {
    --bg: #ffffff;
    --text: #333333;
    --accent: #667eea;
    --secondary: #f8f9fa;
    --border: #e9ecef;
    --shadow: rgba(0, 0, 0, 0.1);
}

* {
    box-sizing: border-box;
}

body {
    margin: 0;
    padding: 0;
    /* System-first font stack to avoid external font downloads */
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
    line-height: 1.6;
    color: var(--text);
    background: var(--bg);
    overflow-x: hidden;
}

.container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 20px;
}

.skip-link {
    position: absolute;
    top: -40px;
    left: 6px;
    background: var(--accent);
    
    margin-bottom: 1rem;
}

/* Navigation */
nav {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(10px);
    z-index: 1000;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

nav .container {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0.75rem 20px;
}

.nav-right {
    display: flex;
    align-items: center;
    gap: 1rem;
}

/* keep nav links visually grouped on the right and prevent them from stretching */
nav #primary-nav {
    display: flex;
    align-items: center;
    gap: 1rem;
}

nav ul {
    display: flex;
    list-style: none;
    margin: 0;
    padding: 0;
    gap: 1rem;
}

nav ul li a {
    color: var(--text);
    text-decoration: none;
    font-weight: 500;
    padding: 0.5rem 1rem;
    border-radius: 6px;
    transition: background 0.3s ease;
}

nav ul li a:hover {
    background: var(--accent);
    color: #fff;
}

@media (max-width: 768px) {
    nav ul {
        position: fixed;
        top: 100%;
        left: 0;
        right: 0;
        background: #fff;
        padding: 1rem;
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
        transform: translateY(-100%);
        transition: transform 0.3s ease;
    }

    nav ul.open {
        transform: translateY(0);
    }
}

.nav-toggle {
    display: none;
}

@media (max-width: 768px) {
    .nav-toggle {
        display: block;
    }
}

/* Hero Section */
#hero {
    padding: 120px 0 80px;
    background: linear-gradient(135deg, var(--secondary) 0%, #fff 100%);
}

.hero-content {
    display: grid;
    /* Fluid right column: uses up to 40vw but never larger than 480px.
       The left column is flexible so the description can use most of the width. */
    grid-template-columns: 1fr min(40vw, 480px);
    gap: 2rem;
    align-items: center;
}

.hero-left h1 {
    margin-bottom: 1rem;
    background: linear-gradient(135deg, var(--accent), #5a67d8);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.hero-left p {
    font-size: 1.1rem;
    margin-bottom: 1rem;
    color: #666;
}

.lead {
    font-size: 1.1rem;
    line-height: 1.8;
    margin: 0 0 1rem 0;
    color: #666;
    text-align: left;
}

.hero-right {
    text-align: center;
    /* allow the right column to shrink and avoid forcing extra whitespace when media hasn't loaded */
    min-width: 0;
    display: flex;
    justify-content: center;
    align-items: center;
}

.hero-right lottie-player {
    width: 100%;
    max-width: 400px;
    height: auto;
}

/* Ensure hero-left can shrink inside the grid (prevents overflow on narrow containers) */
.hero-left {
    min-width: 0;
}

/* About Section */
#about {
    padding: 80px 0;
}

/* Skills Section */
#skills {
    padding: 80px 0;
    background: var(--secondary);
}

.skills-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 2rem;
    margin-top: 2rem;
}

.skill-card {
    background: white;
    padding: 2rem;
    border-radius: 12px;
    box-shadow: 0 4px 6px var(--shadow);
    text-align: center;
    transition: transform 0.3s ease;
}

.skill-card:hover {
    transform: translateY(-5px);
}

    .skill-card .icon {
    width: 48px;
    height: 48px;
    margin: 0 auto 1rem;
    color: var(--accent); /* icons use stroke=currentColor */
    fill: none;
    stroke-linecap: round;
    stroke-linejoin: round;
}

/* Generic icon sizing and alignment for all inline SVG icons */
.icon {
    width: 48px;
    height: 48px;
    display: block;
    margin: 0 auto 1rem;
    color: var(--accent); /* use currentColor in SVG stroke */
    fill: none; /* prefer stroked outlines */
    stroke-linecap: round;
    stroke-linejoin: round;
}

.skill-card h3 {
    margin-bottom: 0.5rem;
}

.skill-card p {
    color: #666;
    font-size: 0.9rem;
}

/* Projects Section */
#projects {
    padding: 80px 0;
}

.projects-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
    gap: 2rem;
    margin-top: 2rem;
}

.project-card {
    background: white;
    border-radius: 12px;
    box-shadow: 0 4px 6px var(--shadow);
    overflow: hidden;
    transition: transform 0.3s ease;
    cursor: pointer;
}

.project-card:hover {
    transform: translateY(-5px);
}

.project-card img {
    width: 100%;
    height: 200px;
    object-fit: cover;
}

.project-card .content {
    padding: 1.5rem;
}

.project-card h3 {
    margin-bottom: 0.5rem;
}

.project-card p {
    color: #666;
    font-size: 0.9rem;
    margin-bottom: 1rem;
}

/* Education Section */
#education {
    padding: 80px 0;
    background: var(--secondary);
}

.timeline {
    position: relative;
    margin-top: 2rem;
}

.timeline::before {
    content: '';
    position: absolute;
    left: 30px;
    top: 0;
    bottom: 0;
    width: 2px;
    background: var(--accent);
}

.timeline-item {
    background: white;
    padding: 2rem;
    margin-left: 60px;
    margin-bottom: 2rem;
    border-radius: 12px;
    box-shadow: 0 4px 6px var(--shadow);
    position: relative;
}

.timeline-item::before {
    content: '';
    position: absolute;
    left: -38px;
    top: 2rem;
    width: 16px;
    height: 16px;
    background: var(--accent);
    border-radius: 50%;
}

.timeline-item h3 {
    margin-bottom: 0.5rem;
}

.timeline-item p {
    color: #666;
    margin-bottom: 0.25rem;
}

/* Contact Section */
#contact {
    padding: 80px 0;
}

.contact-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 2rem;
    margin-top: 2rem;
}

.contact-item {
    background: white;
    padding: 2rem;
    border-radius: 12px;
    box-shadow: 0 4px 6px var(--shadow);
    text-align: center;
    transition: transform 0.3s ease;
}

.contact-item:hover {
    transform: translateY(-5px);
}

.contact-item .icon {
    width: 48px;
    height: 48px;
    margin: 0 auto 1rem;
    fill: var(--accent);
}

.contact-item h3 {
    margin-bottom: 0.5rem;
}

.contact-item p {
    color: #666;
}

.contact-item a {
    color: var(--accent);
    text-decoration: none;
}

.contact-item a:hover {
    text-decoration: underline;
}

/* Footer */
footer {
    background: var(--text);
    color: white;
    padding: 2rem 0;
    text-align: center;
}

/* Modal */
.modal {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.8);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10000;
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
}

.modal.open {
    opacity: 1;
    visibility: visible;
}

.modal-backdrop {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
}

.modal-panel {
    background: white;
    border-radius: 12px;
    max-width: 90vw;
    max-height: 90vh;
    overflow-y: auto;
    position: relative;
    z-index: 1;
}

.modal-close {
    position: absolute;
    top: 1rem;
    right: 1rem;
    background: none;
    border: none;
    font-size: 2rem;
    cursor: pointer;
    z-index: 2;
}

.modal-body {
    display: flex;
    gap: 2rem;
    padding: 2rem;
}

.modal-content {
    flex: 1;
}

.modal-content h2 {
    margin-bottom: 1rem;
}

.modal-content p {
    color: #666;
    margin-bottom: 1rem;
}

.modal-actions {
    margin-top: 2rem;
    display: flex;
    gap: 1rem;
}

.tech-pill {
    display: inline-block;
    background: var(--secondary);
    color: var(--accent);
    padding: 0.25rem 0.75rem;
    border-radius: 20px;
    font-size: 0.8rem;
    margin-right: 0.5rem;
    margin-bottom: 0.5rem;
}

/* Consent Banner */
.consent-banner {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    background: var(--text);
    color: white;
    padding: 1rem;
    z-index: 1000;
    transform: translateY(100%);
    transition: transform 0.3s ease;
}

.consent-banner.visible {
    transform: translateY(0);
}

.consent-inner {
    max-width: 1200px;
    margin: 0 auto;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 2rem;
}

.consent-actions {
    display: flex;
    gap: 1rem;
}

/* Animations */
.animate {
    animation: fadeInUp 0.6s ease-out;
}

@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(30px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Dark theme */
[data-theme="dark"] {
    --bg: #0f1724; /* darker background for contrast */
    --text: #e6eef8; /* brighter body text */
    --secondary: #111827; /* subtle panel background */
    --border: #2b3744;
}

[data-theme="dark"] nav {
    background: rgba(26, 32, 44, 0.9);
}

[data-theme="dark"] .skill-card,
[data-theme="dark"] .project-card,
[data-theme="dark"] .timeline-item,
[data-theme="dark"] .contact-item {
    background: #0f1724;
    color: var(--text);
}

[data-theme="dark"] .skill-card p,
[data-theme="dark"] .project-card p,
[data-theme="dark"] .timeline-item p,
[data-theme="dark"] .contact-item p {
    color: #9fb2c8; /* muted but readable */
}

/* Make paragraph text readable in dark theme */
[data-theme="dark"] p,
[data-theme="dark"] .lead {
    color: #cbd8e6;
}

/* Responsive */
@media (max-width: 768px) {
    .hero-content {
        grid-template-columns: 1fr;
        gap: 2rem;
        text-align: center;
    }

    .hero-right {
        order: -1;
    }

    .modal-body {
        flex-direction: column;
    }

    .consent-inner {
        flex-direction: column;
        text-align: center;
        gap: 1rem;
    }
}
    </style>
    <!-- Moved system-first font stack into main body rule and removed duplicate style block to reduce inline CSS. Skip-link and focus styles remain in the main stylesheet. -->
</head>
<body>
    <a class="skip-link" href="#main-content">Skip to main content</a>
    <nav>
        <div class="container">
            <a href="#hero" aria-label="Lohith R homepage" style="color: var(--accent); text-decoration: none; font-weight: 700;">Lohith R</a>
            <div class="nav-right">
                <div class="nav-actions" style="display:flex; gap:0.5rem; align-items:center;">
                    <button class="theme-toggle" id="theme-toggle" aria-label="Toggle theme">🌙</button>
                    <button class="nav-toggle" aria-controls="primary-nav" aria-expanded="false" aria-label="Toggle navigation">☰</button>
                </div>
                <ul id="primary-nav">
                    <li><a href="#hero">Home</a></li>
                    <li><a href="#about">About</a></li>
                    <li><a href="#skills">Skills</a></li>
                    <li><a href="#projects">Projects</a></li>
                    <li><a href="#education">Education</a></li>
                    <li><a href="#contact">Contact</a></li>
                </ul>
            </div>
        </div>
    </nav>

        <main id="main-content">

        <!-- Inline SVG sprite: only icons used on the page. Improves performance vs loading full Font Awesome font files -->
        <svg aria-hidden="true" style="position:absolute;width:0;height:0;overflow:hidden;" focusable="false">
            <defs>
                <!-- Java -->
                <symbol id="icon-java" viewBox="0 0 24 24"><path d="M8 17c0 1.1 1.8 2 4 2s4-.9 4-2m-8-3c0 1.1 1.8 2 4 2s4-.9 4-2m-8-3c0 1.1 1.8 2 4 2s4-.9 4-2m-8-3c0 1.1 1.8 2 4 2s4-.9 4-2M12 3v1m0 2v1m0 2v1" stroke="currentColor" stroke-width="2" fill="none"/></symbol>
                <!-- HTML5 -->
                <symbol id="icon-html5" viewBox="0 0 24 24"><path d="M4 3l2 16 6 2 6-2 2-16z" stroke="currentColor" stroke-width="2" fill="none"/></symbol>
                <!-- Database -->
                <symbol id="icon-database" viewBox="0 0 24 24"><ellipse cx="12" cy="5" rx="9" ry="3" stroke="currentColor" stroke-width="2" fill="none"/><path d="M3 5v14c0 1.7 4 3 9 3s9-1.3 9-3V5" stroke="currentColor" stroke-width="2" fill="none"/></symbol>
                <!-- Brain -->
                <symbol id="icon-brain" viewBox="0 0 24 24"><path d="M8 12a4 4 0 0 1 8 0m-8 0a4 4 0 0 0 8 0m-8 0v4m8-4v4" stroke="currentColor" stroke-width="2" fill="none"/></symbol>
                <!-- GitHub -->
                <symbol id="icon-github" viewBox="0 0 24 24"><path d="M12 2C6.5 2 2 6.5 2 12c0 4.4 2.9 8.1 7 9.4.5.1.7-.2.7-.5v-1.7c-2.9.6-3.5-1.4-3.5-1.4-.4-1-.9-1.3-.9-1.3-.7-.5.1-.5.1-.5.8.1 1.2.8 1.2.8.7 1.2 1.8.9 2.2.7.1-.5.3-.9.5-1.1-2.3-.3-4.7-1.1-4.7-5 0-1.1.4-2 .9-2.7-.1-.2-.4-1.3.1-2.7 0 0 .8-.3 2.7 1.1a9.3 9.3 0 0 1 5 0c1.9-1.4 2.7-1.1 2.7-1.1.5 1.4.2 2.5.1 2.7.5.7.9 1.6.9 2.7 0 3.9-2.4 4.7-4.7 5 .3.3.5.7.5 1.4v2c0 .3.2.6.7.5A10 10 0 0 0 22 12c0-5.5-4.5-10-10-10z" stroke="currentColor" stroke-width="2" fill="none"/></symbol>
                <!-- Users -->
                <symbol id="icon-users" viewBox="0 0 24 24"><circle cx="7" cy="7" r="3" stroke="currentColor" stroke-width="2" fill="none"/><circle cx="17" cy="7" r="3" stroke="currentColor" stroke-width="2" fill="none"/><path d="M2 21v-2a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v2" stroke="currentColor" stroke-width="2" fill="none"/><path d="M15 21v-2a4 4 0 0 1 4-4h2" stroke="currentColor" stroke-width="2" fill="none"/></symbol>
                <!-- Envelope -->
                <symbol id="icon-envelope" viewBox="0 0 24 24"><rect x="3" y="5" width="18" height="14" rx="2" stroke="currentColor" stroke-width="2" fill="none"/><polyline points="3 7 12 13 21 7" stroke="currentColor" stroke-width="2" fill="none"/></symbol>
                <!-- Phone -->
                <symbol id="icon-phone" viewBox="0 0 24 24"><path d="M22 16.92V19a2 2 0 0 1-2.18 2A19.86 19.86 0 0 1 3 5.18 2 2 0 0 1 5 3h2.09a2 2 0 0 1 2 1.72c.13.81.28 1.6.46 2.36a2 2 0 0 1-.45 2.11l-1.27 1.27a16 16 0 0 0 6.29 6.29l1.27-1.27a2 2 0 0 1 2.11-.45c.76.18 1.55.33 2.36.46A2 2 0 0 1 22 16.92z" stroke="currentColor" stroke-width="2" fill="none"/></symbol>
                <!-- Map marker -->
                <symbol id="icon-map-marker-alt" viewBox="0 0 24 24"><path d="M12 21s-6-5.33-6-10A6 6 0 0 1 12 5a6 6 0 0 1 6 6c0 4.67-6 10-6 10z" stroke="currentColor" stroke-width="2" fill="none"/><circle cx="12" cy="11" r="2" stroke="currentColor" stroke-width="2" fill="none"/></symbol>
                <!-- LinkedIn (clean outline) -->
                <symbol id="icon-linkedin" viewBox="0 0 24 24">
                    <path d="M16 8a6 6 0 0 1 6 6v6h-4v-6a2 2 0 0 0-2-2 2 2 0 0 0-2 2v6h-4v-12h4v2" stroke="currentColor" stroke-width="2" fill="none"/>
                    <rect x="2" y="2" width="4" height="4" rx="1" stroke="currentColor" stroke-width="2" fill="none"/>
                </symbol>
            </defs>
        </svg>

    <section id="hero">
        <div class="container">
            <div class="hero-content">
                <div class="hero-left">
                    <h1>Lohith R</h1>
                    <p>Computer Science and Engineering Student | Full-Stack Developer | AI Enthusiast</p>
                    <p>Methodical and driven Computer Science and Engineering student with a strong foundation in full-stack web development and real-world application design. Experienced in building scalable, user-friendly systems using HTML, CSS, JavaScript, Flask, and MySQL. Passionate about solving practical problems through innovative tech solutions.</p>
                    <a href="#projects" class="btn">View My Work</a>
                    <a href="#contact" class="btn">Get In Touch</a>
                </div>
                <div class="hero-right">
                    <!-- Decorative animation: hidden from assistive tech to avoid noisy screen reader output -->
                    <lottie-player src="https://assets7.lottiefiles.com/packages/lf20_2zv6fglg.json" background="transparent" speed="1" loop autoplay aria-hidden="true" title="Decorative animation"></lottie-player>
                </div>
            </div>
        </div>
    </section>

    <section id="about">
        <div class="container">
            <div class="section-title">
                <h2>About Me</h2>
            </div>
            <p class="lead">
                I'm deeply interested in cybersecurity, artificial intelligence, and solving real-world problems using technology. 
                I've worked on several innovative projects in AI, NLP, and e-commerce platforms. Adept at troubleshooting deployment issues on Vercel and Render. 
                Active participant in Smart India Hackathon and Naan Mudhalvan program, with a commitment to continuous learning and professional growth.
            </p>
        </div>
    </section>

    <section id="skills">
        <div class="container">
            <div class="section-title">
                <h2>Technical Skills</h2>
            </div>
            <div class="skills-grid">
                <div class="skill-card">
                    <svg class="icon icon-java" aria-hidden="true"><use href="#icon-java"></use></svg>
                    <h3>Java</h3>
                    <p>Object-oriented programming and application development</p>
                </div>
                <div class="skill-card">
                    <svg class="icon icon-html5" aria-hidden="true"><use href="#icon-html5"></use></svg>
                    <h3>Web Development</h3>
                    <p>HTML, CSS, JavaScript, Flask</p>
                </div>
                <div class="skill-card">
                    <svg class="icon icon-database" aria-hidden="true"><use href="#icon-database"></use></svg>
                    <h3>Database</h3>
                    <p>MySQL for data management</p>
                </div>
                <div class="skill-card">
                    <svg class="icon icon-brain" aria-hidden="true"><use href="#icon-brain"></use></svg>
                    <h3>AI & ML</h3>
                    <p>Full Stack Web Apps, AI-based Systems, NLP Classifiers</p>
                </div>
                <div class="skill-card">
                    <svg class="icon icon-github" aria-hidden="true"><use href="#icon-github"></use></svg>
                    <h3>Tools & Platforms</h3>
                    <p>Vercel, Render, GitHub</p>
                </div>
                <div class="skill-card">
                    <svg class="icon icon-users" aria-hidden="true"><use href="#icon-users"></use></svg>
                    <h3>Soft Skills</h3>
                    <p>Problem Solving, Teamwork, Adaptability, Communication</p>
                </div>
            </div>
        </div>
    </section>

    <section id="projects">
        <div class="container">
            <div class="section-title">
                <h2>Projects</h2>
            </div>
            <div class="projects-grid">
                <div class="project-card" data-id="lumoro" data-title="Lumoro E-Commerce Scent Website" data-desc="Developed a perfume-based e-commerce website using HTML, CSS and MySQL, featuring product catalog, cart, and secure checkout." data-image="/assets/lumoro.webp" data-github="https://github.com/Lohithravi69/perfume" data-tech="HTML,CSS,MySQL,JavaScript">
                    <picture>
                        <source type="image/webp" srcset="/assets/lumoro.webp 400w, /assets/lumoro.webp 800w" sizes="(max-width:600px) 100vw, 400px">
                        <img fetchpriority="high" decoding="async" src="images/lumoro.jpg" srcset="images/lumoro.jpg 400w" sizes="(max-width:600px) 100vw, 400px" alt="E-Commerce" loading="eager" width="400" height="200" onerror="this.onerror=null;this.src='/assets/lumoro.webp'">
                    </picture>
                    <div class="content">
                        <h3>Lumoro E-Commerce Scent Website</h3>
                        <p>Developed a perfume-based e-commerce website using HTML, CSS, and MySQL, featuring product catalog, cart, and secure checkout.</p>
                        <a href="https://github.com/Lohithravi69/perfume" target="_blank" rel="noopener noreferrer" class="btn">View on GitHub</a>
                    </div>
                </div>
                <div class="project-card" data-id="safenet" data-title="Emergency SOS App for Flood Management" data-desc="AI-integrated emergency response app built for Smart India Hackathon 2025 to provide real-time flood alerts, SOS messaging, and rescue coordination." data-image="/assets/safenet.webp" data-live="https://safenetsos-app.vercel.app" data-tech="React,Node.js,TensorFlow,Maps API">
                    <picture>
                        <source type="image/webp" srcset="/assets/safenet.webp 400w, /assets/safenet.webp 800w" sizes="(max-width:600px) 100vw, 400px">
                        <img decoding="async" src="images/safenet.jpg" srcset="images/safenet.jpg 400w, images/safenet.jpg 800w" sizes="(max-width:600px) 100vw, 400px" alt="Emergency App" loading="lazy" width="400" height="200" onerror="this.onerror=null;this.src='/assets/safenet.webp'">
                    </picture>
                    <div class="content">
                        <h3>Emergency SOS App for Flood Management</h3>
                        <p>AI-integrated emergency response app built for Smart India Hackathon 2025 to provide real-time flood alerts, SOS messaging, and rescue coordination.</p>
                        <a href="https://safenetsos-app.vercel.app" target="_blank" rel="noopener noreferrer" class="btn">View Live Demo</a>
                    </div>
                </div>
                <div class="project-card" data-id="fraud-detect" data-title="Credit Card Fraud Detection using AI" data-desc="Machine learning-based fraud detection system developed in Python to identify suspicious transactions and alert in real-time." data-image="/assets/fraud.webp" data-github="https://github.com/Lohithravi69/FraudDetection" data-tech="Python,scikit-learn,Pandas,Flask">
                    <picture>
                        <source type="image/webp" srcset="/assets/fraud.webp 400w, /assets/fraud.webp 800w" sizes="(max-width:600px) 100vw, 400px">
                        <img decoding="async" src="images/fraud.jpg" srcset="images/fraud.jpg 400w, images/fraud.jpg 800w" sizes="(max-width:600px) 100vw, 400px" alt="Fraud Detection" loading="lazy" width="400" height="200" onerror="this.onerror=null;this.src='/assets/fraud.webp'">
                    </picture>
                    <div class="content">
                        <h3>Credit Card Fraud Detection using AI</h3>
                        <p>Machine learning-based fraud detection system developed in Python to identify suspicious transactions and alert in real-time.</p>
                        <a href="https://github.com/Lohithravi69/FraudDetection" target="_blank" rel="noopener noreferrer" class="btn">View on GitHub</a>
                    </div>
                </div>
                <div class="project-card" data-id="fake-news" data-title="Fake News Detection using NLP and Flask" data-desc="AI-powered Flask web app that detects misleading or fake news using Natural Language Processing." data-image="/assets/fakenews.webp" data-live="https://fake-news-detection-tau.vercel.app" data-tech="Python,NLTK,Flask,Heroku">
                    <picture>
                        <source type="image/webp" srcset="/assets/fakenews.webp 400w, /assets/fakenews.webp 800w" sizes="(max-width:600px) 100vw, 400px">
                        <img decoding="async" src="images/fakenews.jpg" srcset="images/fakenews.jpg 400w, images/fakenews.jpg 800w" sizes="(max-width:600px) 100vw, 400px" alt="Fake News" loading="lazy" width="400" height="200" onerror="this.onerror=null;this.src='/assets/fakenews.webp'">
                    </picture>
                    <div class="content">
                        <h3>Fake News Detection using NLP and Flask</h3>
                        <p>AI-powered Flask web app that detects misleading or fake news using Natural Language Processing.</p>
                        <a href="https://fake-news-detection-tau.vercel.app" target="_blank" rel="noopener noreferrer" class="btn">View Live Demo</a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="education">
        <div class="container">
            <div class="section-title">
                <h2>Education & Achievements</h2>
            </div>
            <div class="timeline">
                <div class="timeline-item">
                    <h3>Bachelor of Engineering (B.E.) in Computer Science and Engineering</h3>
                    <p>PPG Institute of Technology, Coimbatore | Affiliated to Anna University</p>
                    <p>2022 – 2027 | CGPA: 7.83 / 10 (as of 4th semester)</p>
                </div>
                <div class="timeline-item">
                    <h3>NPTEL Course – Introduction to Internet of Things</h3>
                    <p>Score: 63%</p>
                </div>
                <div class="timeline-item">
                    <h3>Active Participant – Smart India Hackathon 2025</h3>
                    <p>Emergency SOS App for Flood Management</p>
                </div>
                <div class="timeline-item">
                    <h3>Completed Naan Mudhalvan AI & Full Stack Development Program</h3>
                    <p>Credit Card Fraud Detection and other projects</p>
                </div>
            </div>
        </div>
    </section>

    <section id="contact">
        <div class="container">
            <div class="section-title">
                <h2>Contact Me</h2>
            </div>
            <div class="contact-grid">
                <div class="contact-item">
                    <svg class="icon icon-envelope" aria-hidden="true"><use href="#icon-envelope"></use></svg>
                    <h3>Email</h3>
                    <p><a href="mailto:lohithravi69@gmail.com">lohithravi69@gmail.com</a></p>
                </div>
                <div class="contact-item">
                    <svg class="icon icon-phone" aria-hidden="true"><use href="#icon-phone"></use></svg>
                    <h3>Phone</h3>
                    <p><a href="tel:+917010102623">+91 70101 02623</a></p>
                </div>
                <div class="contact-item">
                    <svg class="icon icon-map-marker-alt" aria-hidden="true"><use href="#icon-map-marker-alt"></use></svg>
                    <h3>Location</h3>
                    <p>Coimbatore, Tamil Nadu, India</p>
                </div>
                <div class="contact-item">
                    <svg class="icon icon-github" aria-hidden="true"><use href="#icon-github"></use></svg>
                    <h3>GitHub</h3>
                    <p><a href="https://github.com/Lohithravi69" target="_blank" rel="noopener noreferrer">github.com/Lohithravi69</a></p>
                </div>
                <div class="contact-item">
                    <svg class="icon icon-linkedin" aria-hidden="true"><use href="#icon-linkedin"></use></svg>
                    <h3>LinkedIn</h3>
                    <p><a href="https://linkedin.com/in/lohith-ravi-22b9a32a0" target="_blank" rel="noopener noreferrer">linkedin.com/in/lohith-ravi-22b9a32a0</a></p>
                </div>
                <div class="contact-item" style="grid-column: 1 / -1; text-align: left;">
                    <h3>Send a message</h3>
                    <form id="contact-form" aria-label="Contact form">
                        <div style="display:flex; gap:0.5rem; flex-wrap:wrap;">
                            <input type="text" id="cf-name" name="name" placeholder="Your name" required style="flex:1;padding:0.5rem;border-radius:6px;border:1px solid #ddd;">
                            <input type="email" id="cf-email" name="email" placeholder="Your email" required style="flex:1;padding:0.5rem;border-radius:6px;border:1px solid #ddd;">
                        </div>
                        <div style="margin-top:0.5rem;">
                            <textarea id="cf-message" name="message" rows="5" placeholder="How can I help?" required style="width:100%;padding:0.5rem;border-radius:6px;border:1px solid #ddd;"></textarea>
                        </div>
                        <div style="margin-top:0.5rem; display:flex; gap:0.5rem; align-items:center;">
                            <button type="submit" class="btn">Send Message</button>
                            <span id="cf-status" aria-live="polite" style="color:#333"></span>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </section>

    </main>

    <footer>
        <div class="container">
            <p>&copy; 2024 Lohith R. All rights reserved.</p>
        </div>
    </footer>

    <!-- Project detail modal (accessible) -->
    <div id="project-modal" class="modal" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="modal-title">
        <div class="modal-backdrop" data-dismiss="modal"></div>
        <div class="modal-panel" role="document">
            <button class="modal-close" aria-label="Close project details">×</button>
                <div class="modal-body">
                <div id="modal-carousel" style="width:40%; position:relative;">
                    <button id="carousel-prev" class="btn" aria-label="Previous image" style="position:absolute;left:6px;top:6px;z-index:3;">◀</button>
                    <button id="carousel-next" class="btn" aria-label="Next image" style="position:absolute;right:6px;top:6px;z-index:3;">▶</button>
                    <div id="carousel-indicators" aria-hidden="true" style="position:absolute;left:50%;bottom:8px;transform:translateX(-50%);display:flex;gap:6px;z-index:4;"></div>
                </div>
                <img id="modal-image" alt="Project screenshot" loading="lazy" style="display:none;">
                <div class="modal-content">
                    <h2 id="modal-title"></h2>
                    <p id="modal-desc"></p>
                    <div id="modal-tech" style="margin-top:0.5rem;" aria-hidden="false"></div>
                    <div id="modal-embed" style="margin-top:0.75rem;"></div>
                    <div class="modal-actions">
                        <a id="modal-live" class="btn" target="_blank" rel="noopener noreferrer">View Live</a>
                        <a id="modal-github" class="btn" target="_blank" rel="noopener noreferrer">View on GitHub</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Analytics consent banner -->
    <div id="consent-banner" class="consent-banner" aria-hidden="true">
        <div class="consent-inner">
            <p>We use optional analytics to improve this site. Do you allow anonymous usage tracking?</p>
            <div class="consent-actions">
                <button id="consent-accept" class="btn">Yes, allow analytics</button>
                <button id="consent-decline" class="btn ghost">No, thanks</button>
            </div>
        </div>
    </div>

    <script defer>
    // Placeholder for lightweight analytics (Plausible/umami). Replace with real snippet in production.
    // (Optional) Example Plausible script:
    // <script async defer data-domain="yourdomain.com" src="https://plausible.io/js/plausible.js"></script>

    // Project modal logic (delegated)
    (() => {
        const modal = document.getElementById('project-modal');
        const modalTitle = document.getElementById('modal-title');
        const modalDesc = document.getElementById('modal-desc');
        const modalImage = document.getElementById('modal-image');
        const modalLive = document.getElementById('modal-live');
        const modalGithub = document.getElementById('modal-github');
        const closeButtons = modal.querySelectorAll('[data-dismiss], .modal-close');

        let caseStudies = null;

        async function loadCaseStudies() {
            if (caseStudies) return caseStudies;
            try {
                const r = await fetch('/data/case-studies.json', { cache: 'no-cache' });
                caseStudies = await r.json();
            } catch (err) {
                console.error('Failed to load case studies', err);
                caseStudies = [];
            }
            return caseStudies;
        }

        function renderCarousel(images) {
            if (!images || !images.length) return '';
            return images.map((src, idx) => `<img class="carousel-image" src="${src}" alt="Screenshot ${idx+1}" loading="lazy">`).join('');
        }

        async function openModal(data) {
            modalTitle.textContent = data.title || '';
            modalDesc.textContent = data.desc || '';
            // if data.id is present, try to load richer case study
            if (data.id) {
                const list = await loadCaseStudies();
                const found = list.find(cs => cs.id === data.id);
                if (found) {
                    // render images carousel
                    const carouselHtml = renderCarousel(found.images || [data.image].filter(Boolean));
                    const modalBodyImage = document.getElementById('modal-image');
                    if (carouselHtml) {
                        modalBodyImage.style.display = 'none';
                        const holder = document.getElementById('modal-carousel');
                        if (holder) holder.innerHTML = carouselHtml;
                    }
                    // show embed if available
                    const embedContainer = document.getElementById('modal-embed');
                    if (embedContainer) {
                        if (found.embed) {
                            // Only insert iframe if the embed is reachable (avoid showing server 404 pages inside the modal)
                            try {
                                const embedUrl = String(found.embed);
                                // For cross-origin absolute URLs, we cannot HEAD-check reliably, so insert as-is
                                const isAbsolute = embedUrl.startsWith('http://') || embedUrl.startsWith('https://') || embedUrl.startsWith('//');
                                if (isAbsolute) {
                                    embedContainer.innerHTML = `<iframe src="${embedUrl}" title="Interactive demo" style="width:100%;height:300px;border:0;border-radius:8px;" loading="lazy"></iframe>`;
                                } else {
                                    // same-origin/relative path: try a HEAD request first
                                    const headResp = await fetch(embedUrl, { method: 'HEAD' });
                                    if (headResp.ok) {
                                        embedContainer.innerHTML = `<iframe src="${embedUrl}" title="Interactive demo" style="width:100%;height:300px;border:0;border-radius:8px;" loading="lazy"></iframe>`;
                                    } else {
                                        embedContainer.innerHTML = '<div style="padding:1rem;background:var(--secondary);border-radius:8px;color:#666">Demo not available</div>';
                                    }
                                }
                            } catch (err) {
                                // network error or CORS - show friendly message instead of the server error page
                                embedContainer.innerHTML = '<div style="padding:1rem;background:var(--secondary);border-radius:8px;color:#666">Demo not available</div>';
                            }
                        } else {
                            embedContainer.innerHTML = '';
                        }
                    }
                }
            } else {
                // fallback single image
                if (data.image) {
                    modalImage.src = data.image;
                    modalImage.alt = data.title || 'Project screenshot';
                    modalImage.style.display = '';
                } else {
                    modalImage.style.display = 'none';
                }
            }
            // populate tech list
            const techListContainer = document.getElementById('modal-tech');
            if (techListContainer) {
                techListContainer.innerHTML = '';
                const techCsv = data.tech || '';
                const techs = techCsv.split(',').map(t => t.trim()).filter(Boolean);
                techs.forEach(t => {
                    const el = document.createElement('span');
                    el.className = 'tech-pill';
                    el.textContent = t;
                    techListContainer.appendChild(el);
                });
            }
            if (data.live) {
                modalLive.href = data.live;
                modalLive.style.display = '';
            } else {
                modalLive.style.display = 'none';
            }
            if (data.github) {
                modalGithub.href = data.github;
                modalGithub.style.display = '';
            } else {
                modalGithub.style.display = 'none';
            }
            modal.setAttribute('aria-hidden', 'false');
            modal.classList.add('open');
            // trap focus
            modal.focus();
            document.body.style.overflow = 'hidden';

            // initialize carousel controls
            const prev = document.getElementById('carousel-prev');
            const next = document.getElementById('carousel-next');
            const holder = document.getElementById('modal-carousel');
            let currentIndex = 0;
            function showIndex(i) {
                const imgs = holder.querySelectorAll('.carousel-image');
                const dots = document.querySelectorAll('#carousel-indicators .dot');
                if (!imgs.length) return;
                imgs.forEach((img, idx) => img.style.display = idx === i ? '' : 'none');
                dots.forEach((d, idx) => d.classList.toggle('active', idx === i));
                currentIndex = i;
            }
            prev && prev.addEventListener('click', () => {
                const imgs = holder.querySelectorAll('.carousel-image');
                if (!imgs.length) return;
                showIndex((currentIndex - 1 + imgs.length) % imgs.length);
            });
            next && next.addEventListener('click', () => {
                const imgs = holder.querySelectorAll('.carousel-image');
                if (!imgs.length) return;
                showIndex((currentIndex + 1) % imgs.length);
            });
            // indicators
            const indicators = document.getElementById('carousel-indicators');
            indicators.innerHTML = '';
            const imgs = holder.querySelectorAll('.carousel-image');
            imgs.forEach((_, idx) => {
                const dot = document.createElement('button');
                dot.className = 'dot';
                dot.setAttribute('aria-label', `Show image ${idx+1}`);
                dot.addEventListener('click', () => showIndex(idx));
                indicators.appendChild(dot);
            });

            // autoplay
            let autoplayTimer = null;
            function startAutoplay() {
                if (autoplayTimer) clearInterval(autoplayTimer);
                autoplayTimer = setInterval(() => {
                    const imgs = holder.querySelectorAll('.carousel-image');
                    if (!imgs.length) return;
                    showIndex((currentIndex + 1) % imgs.length);
                }, 4000);
            }
            startAutoplay();

            // touch swipe support
            let touchStartX = 0;
            holder.addEventListener('touchstart', (e) => { touchStartX = e.touches[0].clientX; if (autoplayTimer) clearInterval(autoplayTimer); });
            holder.addEventListener('touchend', (e) => {
                const dx = e.changedTouches[0].clientX - touchStartX;
                if (Math.abs(dx) > 40) {
                    if (dx > 0) prev && prev.click(); else next && next.click();
                }
                startAutoplay();
            });
            // keyboard left/right for carousel
            function carouselKey(e) {
                if (e.key === 'ArrowLeft') prev && prev.click();
                if (e.key === 'ArrowRight') next && next.click();
            }
            window.addEventListener('keydown', carouselKey);
            // show first image
            showIndex(0);
            // cleanup when modal closes
            modal.addEventListener('transitionend', () => {
                if (!modal.classList.contains('open')) {
                    window.removeEventListener('keydown', carouselKey);
                }
            }, { once: true });
        }

        function closeModal() {
            modal.setAttribute('aria-hidden', 'true');
            modal.classList.remove('open');
            document.body.style.overflow = '';
        }

        // Open when clicking a project-card
        document.addEventListener('click', (e) => {
            const card = e.target.closest('.project-card');
            if (!card) return;
            // ignore clicks on explicit links inside card
            if (e.target.tagName === 'A') return;
            const data = {
                title: card.dataset.title,
                desc: card.dataset.desc,
                image: card.dataset.image,
                github: card.dataset.github,
                live: card.dataset.live
            };
            openModal(data);
        });

        // Close when clicking backdrop or close button
        modal.addEventListener('click', (e) => {
            if (e.target.classList.contains('modal-backdrop') || e.target.classList.contains('modal-close')) {
                closeModal();
            }
        });

        // Close on Escape
        window.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && modal.classList.contains('open')) closeModal();
        });

        // Analytics consent
        (function analyticsConsent() {
            const banner = document.getElementById('consent-banner');
            const accept = document.getElementById('consent-accept');
            const decline = document.getElementById('consent-decline');
            const key = 'analytics-consent';

            function showBanner() {
                if (!localStorage.getItem(key)) {
                    banner.setAttribute('aria-hidden', 'false');
                    banner.classList.add('visible');
                }
            }

            function setConsent(value) {
                localStorage.setItem(key, value ? 'granted' : 'denied');
                banner.setAttribute('aria-hidden', 'true');
                banner.classList.remove('visible');
                if (value) loadAnalytics();
            }

            accept.addEventListener('click', () => setConsent(true));
            decline.addEventListener('click', () => setConsent(false));

            // If previously granted, load analytics immediately
            if (localStorage.getItem(key) === 'granted') loadAnalytics();
            else showBanner();

            function loadAnalytics() {
                // Insert your analytics script here (Plausible/umami/GA)
                // Example (Plausible):
                // const s = document.createElement('script');
                // s.src = 'https://plausible.io/js/plausible.js';
                // s.defer = true; s.async = true; s.setAttribute('data-domain', location.hostname);
                // document.head.appendChild(s);
                console.info('Analytics would be loaded now (consent granted)');
            }
        })();

    })();

    // Lazy-load Lottie player when hero is visible
    (function lazyLottie() {
        const hero = document.getElementById('hero');
        if (!hero) return;
        const io = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const s = document.createElement('script');
                    s.src = 'https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js';
                    s.defer = true; s.async = true;
                    document.head.appendChild(s);
                    io.disconnect();
                }
            });
        }, { rootMargin: '200px' });
        io.observe(hero);
    })();
    // Smooth scrolling for navigation
        document.querySelectorAll('nav a').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                target.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            });
        });

        // Scroll animations
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('animate');
                }
            });
        }, observerOptions);

        // Observe sections, titles, cards, items
        document.querySelectorAll('section').forEach(section => observer.observe(section));
        document.querySelectorAll('.section-title').forEach(title => observer.observe(title));
        document.querySelectorAll('.skill-card').forEach(card => observer.observe(card));
        document.querySelectorAll('.project-card').forEach(card => observer.observe(card));
        document.querySelectorAll('.timeline-item').forEach(item => observer.observe(item));
        document.querySelectorAll('.contact-item').forEach(item => observer.observe(item));

        // Mobile nav toggle behavior
        const navToggle = document.querySelector('.nav-toggle');
        const primaryNav = document.getElementById('primary-nav');
        if (navToggle && primaryNav) {
            navToggle.addEventListener('click', () => {
                const expanded = navToggle.getAttribute('aria-expanded') === 'true';
                navToggle.setAttribute('aria-expanded', String(!expanded));
                primaryNav.classList.toggle('open');
            });
        }

        // Contact form submission (client-side)
        const contactForm = document.getElementById('contact-form');
        if (contactForm) {
            const statusEl = document.getElementById('cf-status');
            contactForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                const btn = contactForm.querySelector('button[type="submit"]');
                const name = document.getElementById('cf-name').value.trim();
                const email = document.getElementById('cf-email').value.trim();
                const message = document.getElementById('cf-message').value.trim();
                if (!name || !email || !message) {
                    statusEl.textContent = 'Please fill all fields.';
                    return;
                }
                try {
                    btn.disabled = true;
                    statusEl.textContent = 'Sending...';
                    const res = await fetch('/api/contact', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ name, email, message })
                    });
                    const data = await res.json();
                    if (res.ok) {
                        statusEl.textContent = 'Message sent — thank you!';
                        contactForm.reset();
                    } else {
                        statusEl.textContent = data?.error || 'Failed to send message.';
                    }
                } catch (err) {
                    console.error(err);
                    statusEl.textContent = 'Network error — please try again later.';
                } finally {
                    btn.disabled = false;
                }
            });
        }
    </script>
    <!-- Runtime image swapper: update both <source> and <img> using data-id and fallback to inline SVG placeholder -->
    <script>
        (function() {
            const placeholder = 'data:image/svg+xml;utf8,' + encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="400" height="200" viewBox="0 0 400 200"><rect fill="#f3f4f6" width="400" height="200" rx="8"/><g fill="#cbd5e1" font-family="Arial, Helvetica, sans-serif" font-size="14" text-anchor="middle"><text x="200" y="100">Image unavailable</text></g></svg>');

            // small helper to probe whether a URL exists (HEAD) with timeout
            async function exists(url, timeout = 1500) {
                try {
                    const controller = new AbortController();
                    const id = setTimeout(() => controller.abort(), timeout);
                    const res = await fetch(url, { method: 'HEAD', signal: controller.signal });
                    clearTimeout(id);
                    return res && res.ok;
                } catch (err) {
                    return false;
                }
            }

            (async function setProjectImages() {
                const cards = document.querySelectorAll('.project-card');
                for (const card of cards) {
                    const id = (card.dataset.id || '').toLowerCase();
                    if (!id) continue;
                    const pic = card.querySelector('picture');
                    if (!pic) continue;
                    const source = pic.querySelector('source');
                    const img = pic.querySelector('img');

                    // If the card provides a data-image attribute, prefer it (it contains correct filename).
                    const dataImage = (card.dataset.image || '').trim();
                    const candidates = [];
                    if (dataImage) {
                        if (dataImage.startsWith('/')) candidates.push(dataImage);
                        else candidates.push('/' + dataImage);
                        if (!dataImage.startsWith('/public/')) candidates.push('/public' + (dataImage.startsWith('/') ? '' : '/') + dataImage.replace(/^\//, ''));
                    }
                    // generate normalized name variants from id to handle hyphen/underscore differences
                    const variants = [id];
                    if (id.includes('-')) variants.push(id.replace(/-/g, ''));
                    if (id.includes('_')) variants.push(id.replace(/_/g, ''));
                    // also try first token (e.g., 'fraud-detect' -> 'fraud')
                    const first = id.split(/[-_]/)[0];
                    if (first && !variants.includes(first)) variants.push(first);
                    // build candidates from variants
                    for (const v of variants) {
                        candidates.push('/public/assets/' + v + '.webp');
                        candidates.push('/assets/' + v + '.webp');
                        candidates.push('images/' + v + '.jpg');
                    }
                    let chosen = null;
                    for (const c of candidates) {
                        // For local file:// preview, fetch will fail; skip probing if scheme is file:
                        if (location.protocol === 'file:' && c.startsWith('/')) continue;
                        if (await exists(c)) { chosen = c; break; }
                    }
                    // Fallback rules when probing didn't find a candidate
                    if (!chosen) {
                        // If serving via http(s), try /assets first (common for Vercel), otherwise images/
                        if (location.protocol === 'http:' || location.protocol === 'https:') chosen = '/assets/' + id + '.webp';
                        else chosen = 'images/' + id + '.jpg';
                    }

                    if (source) source.srcset = chosen + ' 400w, ' + chosen + ' 800w';
                    if (img) {
                        img.src = chosen;
                        img.srcset = source ? source.srcset : (chosen + ' 400w');
                        img.onerror = function() { this.onerror = null; this.src = placeholder; };
                    }
                }
            })();
        })();
    </script>
    <!-- Theme toggle: persist in localStorage and reflect system preference -->
    <script>
        (function () {
            const themeToggle = document.getElementById('theme-toggle');
            const root = document.documentElement;
            const stored = localStorage.getItem('theme');
            const systemPrefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
            const initial = stored || (systemPrefersDark ? 'dark' : 'light');
            if (initial === 'dark') root.setAttribute('data-theme', 'dark');
            if (themeToggle) {
                const updateIcon = () => { themeToggle.textContent = root.getAttribute('data-theme') === 'dark' ? '☀️' : '🌙'; };
                updateIcon();
                themeToggle.addEventListener('click', () => {
                    const now = root.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
                    if (now === 'dark') root.setAttribute('data-theme', 'dark'); else root.removeAttribute('data-theme');
                    localStorage.setItem('theme', now === 'dark' ? 'dark' : 'light');
                    updateIcon();
                });
            }
        })();

    </script>

    <!-- Deterministic runtime image mapping: use /public/assets on localhost, /assets in production -->
    <script>
        (function() {
            const placeholder = 'data:image/svg+xml;utf8,' + encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="400" height="200" viewBox="0 0 400 200"><rect fill="#f3f4f6" width="400" height="200" rx="8"/><g fill="#cbd5e1" font-family="Arial, Helvetica, sans-serif" font-size="14" text-anchor="middle"><text x="200" y="100">Image unavailable</text></g></svg>');
            const hostname = location.hostname;
            const usePublicPrefix = hostname === 'localhost' || hostname === '127.0.0.1' || hostname === '';
            const base = usePublicPrefix ? '/public' : '';

            document.querySelectorAll('.project-card').forEach(card => {
                const id = (card.dataset.id || '').toLowerCase();
                if (!id) return;
                const pic = card.querySelector('picture');
                if (!pic) return;
                const source = pic.querySelector('source');
                const img = pic.querySelector('img');

                const assetPath = base + '/assets/' + id + '.webp';
                const imageFallback = 'images/' + id + '.jpg';

                if (source) source.srcset = assetPath + ' 400w, ' + assetPath + ' 800w';
                if (img) {
                    img.src = assetPath;
                    img.srcset = assetPath + ' 400w, ' + assetPath + ' 800w';
                    img.onerror = function() {
                        if (!this.dataset._triedFallback) {
                            this.dataset._triedFallback = '1';
                            this.src = imageFallback;
                        } else {
                            this.onerror = null;
                            this.src = placeholder;
                        }
                    };
                }
            });
        })();
    </script>

</body>
</html>